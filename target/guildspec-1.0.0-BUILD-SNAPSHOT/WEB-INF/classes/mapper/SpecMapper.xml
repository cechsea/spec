<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.guringnae.guildspec.SpecMapper">
 	<resultMap type="com.guringnae.guildspec.SpecDTO" id="spec">
		<result property="nickname" column="nickname" />
		<result property="level" column="level" />
		<result property="spec" column="spec" />
		<result property="job" column="job" />
		<result property="floor" column="floor" />
		<result property="time" column="time" />
	</resultMap>

    <select id="selectNow" resultType="String">
        SELECT NOW()
    </select>
    
    <select id="attackList" resultMap="spec"  parameterType="java.util.Map">
    <![CDATA[
    SELECT
    nickname,
    level,
    spec,
    job,
    floor,
    time
    FROM SPEC
    WHERE
    	job not in
    ]]>
    	<foreach collection="code_list" item="item" index="index" separator="," open="(" close=")">
 			'${item}'
        </foreach>
    <![CDATA[
    ORDER BY floor desc, time asc, level desc
    ]]>
    </select>
    
    <select id="supList" resultMap="spec" parameterType="java.util.Map">
    <![CDATA[
    SELECT
    nickname,
    level,
    spec,
    job,
    floor,
    time
    FROM SPEC
    WHERE
    	job in
    	]]>
    	<foreach collection="code_list" item="item" index="index" separator="," open="(" close=")">
 			'${item}'
        </foreach>
    <![CDATA[
    ORDER BY floor desc, time asc, level desc
    ]]>
    </select>
    
</mapper>
